<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í…Œë‹ˆìŠ¤ ë§¤ì¹˜ ì‹ ì²­ - 2ì¸ì œ/4ì¸ì œ</title>
    <style>
        :root {
            --court-max-w: 600px;
            --line: rgba(255,255,255,.85);
            --line-soft: rgba(255,255,255,.35);

            /* ì£¼í™© í¬ì¸íŠ¸ ì»¬ëŸ¬ */
            --accent-orange: #ff8c00;
            --accent-orange-dark: #e67a00;
            --accent-orange-bg: rgba(255,140,0,.08);
            --accent-orange-border: rgba(255,140,0,.28);
        }
        /* ë¼ì´íŠ¸ í…Œë§ˆ */
        body { margin:0; background:#ffffff; color:#111; font-family:system-ui, sans-serif; }
        h2 { text-align:center; margin:18px 0; font-weight:800; }

        /* ìƒë‹¨ í—¤ë”(ë°°ê²½ ì£¼í™©) + ìš°ì¸¡ 'ëª©ë¡ìœ¼ë¡œ' ë²„íŠ¼ */
        .page-header{
            position:relative;
            background: var(--accent-orange);
            color:#fff;
            padding:16px 20px;
            margin-bottom:12px;
        }
        .page-header h2{
            margin:0;
            text-align:center;
            color:#fff; /* ì œëª© í°ìƒ‰ */
            font-weight:800;
        }
        .list-btn{
            position:absolute;
            right:20px;
            top:50%;
            transform: translateY(-50%);
            padding:8px 14px;
            background:#fff;
            color:var(--accent-orange);
            border:1px solid #fff;
            border-radius:8px;
            text-decoration:none;
            font-weight:700;
            line-height:1;
        }
        .list-btn:hover{
            background:transparent;
            color:#fff;
            border-color:#fff;
        }

        /* ===== Court ===== */
        .court {
            position: relative;
            width: min(95vw, var(--court-max-w));
            margin: 0 auto 24px;
            aspect-ratio: 23.77 / 10.97;
            border-radius: 18px;
            overflow: hidden;
            background:
                repeating-linear-gradient(
                    90deg,
                    #8B4513 0%,
                    #8B4513 8%,
                    #A0522D 8%,
                    #A0522D 16%
                );
            box-shadow: 0 20px 50px rgba(0,0,0,.15), inset 0 0 0 2px #654321;
        }
        .baseline { position:absolute; inset:2.5% 2.5%; border: 3px solid var(--line); border-radius: 8px; pointer-events:none; }
        .service-line { position:absolute; top:50%; left:2.5%; right:2.5%; height:3px; background:var(--line); transform:translateY(-50%); }
        .center-line { position:absolute; top:2.5%; bottom:2.5%; left:50%; width:3px; background:var(--line); transform:translateX(-50%); }
        .service-box { position:absolute; width:calc(50% - 2.5%); height:calc(50% - 2.5%); border: 2px solid var(--line-soft); }
        .service-box.tl { top:2.5%; left:2.5%; }
        .service-box.tr { top:2.5%; right:2.5%; }
        .service-box.bl { bottom:2.5%; left:2.5%; }
        .service-box.br { bottom:2.5%; right:2.5%; }

        /* ===== Players ===== */
        .player { --x: 50; --y: 50; position:absolute; left: calc(var(--x) * 1%); top: calc(var(--y) * 1%); transform: translate(-50%, -62%); text-align:center; cursor:pointer; user-select:none; }
        .avatar { width: clamp(42px, 5.2vw, 64px); height: clamp(42px, 5.2vw, 64px); border-radius: 50%; background: rgba(0,0,0,.75); border: 2px solid rgba(255,255,255,.7); display:grid; place-items:center; color:#fff; font-weight:800; backdrop-filter: blur(2px); transition: transform .15s ease, box-shadow .15s ease; }
        .player:hover .avatar { transform: translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.45); }
        .badge-pos { position:absolute; right:-6px; top:-6px; font: 700 11px/1 system-ui; color:#fff; background:#0d6efd; padding:2px 7px; border-radius:999px; border:1px solid #9ec0ff; }
        .name { display:none; margin-top:6px; padding:2px 8px; font-weight:700; font-size:13px; color:#fff; background: rgba(0,0,0,.45); border-radius:8px; white-space:nowrap; }
        .player.show .name { display:inline-block; }
        .player.selected .avatar { outline: 3px solid #ffc107; }
        .player.occupied .avatar { background:#28a745; color:#fff; border-color:#28a745; }
        .player.occupied .badge-pos { background:#28a745; }

        /* í¼ & ì •ë³´ ë°•ìŠ¤ */
        .application-form { max-width: 600px; margin: 0 auto; padding: 20px; background: #f9fafb; border-radius: 12px; border: 1px solid #e5e7eb; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display:block; margin-bottom:8px; font-weight:600; color:#111; }
        .form-group input, .form-group select { width:100%; padding:12px; border:1px solid #d1d5db; border-radius:8px; background:#fff; color:#111; font-size:16px; }
        .form-group input:focus, .form-group select:focus { outline:none; border-color:#0d6efd; box-shadow:0 0 0 3px rgba(13,110,253,.25); }

        /* 'ë§¤ì¹˜ ì‹ ì²­í•˜ê¸°' ë²„íŠ¼ â€“ ì£¼í™© */
        .btn-apply { width: 100%; padding: 15px; background: var(--accent-orange); color: #fff; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .btn-apply:hover { background: var(--accent-orange-dark); }

        .match-info { background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #e5e7eb; }
        .match-info h3 { margin-top:0; color:#0d6efd; }
        .info-row { display:flex; justify-content:space-between; margin-bottom:10px; padding:8px 0; border-bottom:1px solid #e5e7eb; }
        .info-label { font-weight:600; color:#555; }
        .info-value { color:#111; }

        /* 'í¬ì§€ì…˜ë³„ ì°¸ê°€ë¹„' â€“ ì£¼í™© */
        .price-info { background: var(--accent-orange-bg); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--accent-orange-border); }
        .price-info h4 { margin-top:0; color: var(--accent-orange); text-align:center; }
        .price-grid { display:grid; grid-template-columns:repeat(2, 1fr); gap:10px; margin-top:15px; }
        .price-item { text-align:center; padding:10px; background: var(--accent-orange-bg); border-radius:6px; border:1px solid var(--accent-orange-border); }
        .price-item .position { font-weight:600; color: var(--accent-orange); margin-bottom:5px; }
        .price-item .price { font-size:18px; font-weight:700; color:#111; }
    </style>
</head>
<body>

<!-- í—¤ë”: ë°°ê²½ ì£¼í™© + ìš°ì¸¡ 'ëª©ë¡ìœ¼ë¡œ' ë²„íŠ¼ -->
<div class="page-header">
    <h2>ğŸ¾ í…Œë‹ˆìŠ¤ ë§¤ì¹˜ ì‹ ì²­</h2>
    <a class="list-btn" href="/match/list">ëª©ë¡ìœ¼ë¡œ</a>
</div>

<!-- ë§¤ì¹˜ ì •ë³´ -->
<div class="match-info">
    <h3>ë§¤ì¹˜ ì •ë³´</h3>
    <div class="info-row">
        <span class="info-label">ê²½ê¸°ì¥:</span>
        <span class="info-value">{{match.venue.venueName}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">ë‚ ì§œ:</span>
        <span class="info-value">{{match.matchDate}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">ì‹œê°„:</span>
        <span class="info-value">{{match.startTime}} - {{match.endTime}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">ì°¸ê°€ì:</span>
        <span class="info-value">{{match.currentPlayers}}/{{match.maxPlayers}}ëª…</span>
    </div>
</div>

<!-- í¬ì§€ì…˜ë³„ ê°€ê²© ì •ë³´ (ì£¼í™©) -->
<div class="price-info">
    <h4>í¬ì§€ì…˜ë³„ ì°¸ê°€ë¹„</h4>
    <div class="price-grid">
        <div class="price-item">
            <div class="position">í™ˆ í”Œë ˆì´ì–´1</div>
            <div class="price">15,000ì›</div>
        </div>
        <div class="price-item">
            <div class="position">í™ˆ í”Œë ˆì´ì–´2</div>
            <div class="price">12,000ì›</div>
        </div>
        <div class="price-item">
            <div class="position">ì›ì • í”Œë ˆì´ì–´1</div>
            <div class="price">15,000ì›</div>
        </div>
        <div class="price-item">
            <div class="position">ì›ì • í”Œë ˆì´ì–´2</div>
            <div class="price">12,000ì›</div>
        </div>
    </div>
</div>

<div class="court" id="court">
    <div class="baseline"></div>
    <div class="service-line"></div>
    <div class="center-line"></div>
    <div class="service-box tl"></div>
    <div class="service-box tr"></div>
    <div class="service-box bl"></div>
    <div class="service-box br"></div>

    <!-- í™ˆíŒ€ -->
    <div class="player" style="--x:25; --y:30;" data-name="í™ˆ í”Œë ˆì´ì–´1" data-pos="SINGLES" data-position="HOME1">
        <div class="avatar">1</div>
        <div class="badge-pos">H1</div>
        <div class="name">{{#positionStatus.HOME1}}{{positionStatus.HOME1}}{{/positionStatus.HOME1}}{{^positionStatus.HOME1}}í™ˆ í”Œë ˆì´ì–´1{{/positionStatus.HOME1}}</div>
    </div>
    <div class="player" style="--x:25; --y:70;" data-name="í™ˆ í”Œë ˆì´ì–´2" data-pos="DOUBLES" data-position="HOME2">
        <div class="avatar">2</div>
        <div class="badge-pos">H2</div>
        <div class="name">{{#positionStatus.HOME2}}{{positionStatus.HOME2}}{{/positionStatus.HOME2}}{{^positionStatus.HOME2}}í™ˆ í”Œë ˆì´ì–´2{{/positionStatus.HOME2}}</div>
    </div>

    <!-- ì›ì •íŒ€ -->
    <div class="player" style="--x:75; --y:30;" data-name="ì›ì • í”Œë ˆì´ì–´1" data-pos="SINGLES" data-position="AWAY1">
        <div class="avatar">1</div>
        <div class="badge-pos">A1</div>
        <div class="name">{{#positionStatus.AWAY1}}{{positionStatus.AWAY1}}{{/positionStatus.AWAY1}}{{^positionStatus.AWAY1}}ì›ì • í”Œë ˆì´ì–´1{{/positionStatus.AWAY1}}</div>
    </div>
    <div class="player" style="--x:75; --y:70;" data-name="ì›ì • í”Œë ˆì´ì–´2" data-pos="DOUBLES" data-position="AWAY2">
        <div class="avatar">2</div>
        <div class="badge-pos">A2</div>
        <div class="name">{{#positionStatus.AWAY2}}{{positionStatus.AWAY2}}{{/positionStatus.AWAY2}}{{^positionStatus.AWAY2}}ì›ì • í”Œë ˆì´ì–´2{{/positionStatus.AWAY2}}</div>
    </div>
</div>

<!-- ì‹ ì²­ í¼ -->
<div class="application-form">
    <h3>í¬ì§€ì…˜ ì‹ ì²­</h3>
    <form action="/match/{{match.matchId}}/apply" method="post">
        <div class="form-group">
            <label for="position">í¬ë§ í¬ì§€ì…˜</label>
            <select id="position" name="position" required>
                <option value="">í¬ì§€ì…˜ì„ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="HOME1" data-price="15000">í™ˆ í”Œë ˆì´ì–´1 - 15,000ì›</option>
                <option value="HOME2" data-price="12000">í™ˆ í”Œë ˆì´ì–´2 - 12,000ì›</option>
                <option value="AWAY1" data-price="15000">ì›ì • í”Œë ˆì´ì–´1 - 15,000ì›</option>
                <option value="AWAY2" data-price="12000">ì›ì • í”Œë ˆì´ì–´2 - 12,000ì›</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">ì°¸ê°€ë¹„ (ì›)</label>
            <input type="number" id="price" name="price" min="0" step="1000" readonly>
        </div>
        <button type="submit" class="btn-apply">ë§¤ì¹˜ ì‹ ì²­í•˜ê¸°</button>
    </form>
</div>

<script>
    // ì´ë¦„ ë¼ë²¨ í† ê¸€
    document.querySelectorAll('.player').forEach(p => {
        const nameEl = p.querySelector('.name');
        nameEl.textContent = p.dataset.name;
        p.addEventListener('click', () => p.classList.toggle('show'));
    });

    // í¬ì§€ì…˜ ì„ íƒ ì‹œ ê°€ê²© ìë™ í‘œì‹œ
    document.getElementById('position').addEventListener('change', function() {
        const selectedOption = this.options[this.selectedIndex];
        const priceInput = document.getElementById('price');
        priceInput.value = selectedOption.value ? selectedOption.getAttribute('data-price') : '';
    });

    // ì´ë¯¸ ì‹ ì²­ëœ í¬ì§€ì…˜ì€ ì„ íƒ ë¶ˆê°€
    document.addEventListener('DOMContentLoaded', function() {
        const positionSelect = document.getElementById('position');
        const positionStatus = {
            HOME1: '{{positionStatus.HOME1}}',
            HOME2: '{{positionStatus.HOME2}}',
            AWAY1: '{{positionStatus.AWAY1}}',
            AWAY2: '{{positionStatus.AWAY2}}'
        };
        Object.entries(positionStatus).forEach(([position, nickname]) => {
            if (nickname && nickname.trim() !== '') {
                const playerElement = document.querySelector(`[data-position="${position}"]`);
                if (playerElement) playerElement.classList.add('occupied');
                const option = positionSelect.querySelector(`option[value="${position}"]`);
                if (option) { option.disabled = true; option.textContent += ' (ì‹ ì²­ì™„ë£Œ)'; }
            }
        });
    });
</script>
</body>
</html>
