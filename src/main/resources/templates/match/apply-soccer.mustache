<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>축구 매치 신청 - 11v11 라인업</title>
    <style>
        /* 파란 헤더 + 우측 '목록으로' 버튼 */
.page-header{
    position:relative;
    background:#0d6efd;   /* 파란 배경 */
    color:#fff;
    padding:16px 20px;
    margin:0 0 12px;
}
.page-header h2{
    margin:0;
    text-align:center;    /* 가운데 정렬 */
    color:#fff;           /* 흰 글자 */
    font-weight:800;
}
.list-btn{
    position:absolute;
    right:20px;
    top:50%;
    transform: translateY(-50%);
    padding:8px 14px;
    background:#fff;
    color:#0d6efd;
    border:1px solid #fff;
    border-radius:8px;
    text-decoration:none;
    font-weight:700;
    line-height:1;
}
.list-btn:hover{
    background:transparent;
    color:#fff;
    border-color:#fff;
}

        :root {
            /* 필드 비율: 국제 규격 근사 (105m x 68m) */
            --pitch-max-w: 1280px;
            --line: rgba(255,255,255,.85);
            --line-soft: rgba(255,255,255,.35);
        }
        /* === 배경/글자색 '라이트' 테마로 변경 === */
        body { margin:0; background:#ffffff; color:#111; font-family:system-ui, sans-serif; }
        h2 { text-align:center; margin:18px 0; font-weight:800; }

        /* ===== Pitch ===== */
        .pitch {
            position: relative;
            width: min(95vw, var(--pitch-max-w));
            margin: 0 auto 24px;
            aspect-ratio: 105 / 68;
            border-radius: 18px;
            overflow: hidden;
            background:
                repeating-linear-gradient(
                    90deg,
                    #224d22 0%,
                    #224d22 8%,
                    #1d421d 8%,
                    #1d421d 16%
                );
            box-shadow: 0 20px 50px rgba(0,0,0,.15), inset 0 0 0 2px #0a1b0a;
        }

        .touchline { position:absolute; inset:2.5% 2.5%; border: 3px solid var(--line); border-radius: 8px; pointer-events:none; }
        .halfline { position:absolute; top:2.5%; bottom:2.5%; left:50%; width:3px; background:var(--line); transform:translateX(-50%); }
        .center-circle { position:absolute; left:50%; top:50%; width:18%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; transform:translate(-50%,-50%); }
        .center-spot { position:absolute; left:50%; top:50%; width:10px; height:10px; background:var(--line); border-radius:50%; transform:translate(-50%,-50%); }

        .box { position:absolute; width:18%; height:32%; top:50%; transform:translateY(-50%); border:3px solid var(--line); }
        .box.left { left:2.5%; }  .box.right { right:2.5%; }
        .goal-area { position:absolute; width:6.5%; height:15%; top:50%; transform:translateY(-50%); border:3px solid var(--line); }
        .goal-area.left { left:2.5%; } .goal-area.right { right:2.5%; }
        .pen-spot { position:absolute; width:10px; height:10px; background:var(--line); border-radius:50%; top:50%; transform:translateY(-50%); }
        .pen-spot.left { left: 2.5% + 12%; transform:translate(-50%,-50%); }
        .pen-spot.right { right: 2.5% + 12%; transform:translate(50%,-50%); }
        .arc { position:absolute; top:50%; width:10%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; border-left-color:transparent; border-right-color:transparent; }
        .arc.left { left: calc(2.5% + 18%); transform: translate(-50%,-50%) rotate(90deg); }
        .arc.right { right: calc(2.5% + 18%); transform: translate(50%,-50%) rotate(-90deg); }

        .corner { position:absolute; width:4%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; }
        .corner.tl { left:2.5%; top:2.5%; border-right-color:transparent; border-bottom-color:transparent; }
        .corner.tr { right:2.5%; top:2.5%; border-left-color:transparent; border-bottom-color:transparent; }
        .corner.bl { left:2.5%; bottom:2.5%; border-right-color:transparent; border-top-color:transparent; }
        .corner.br { right:2.5%; bottom:2.5%; border-left-color:transparent; border-top-color:transparent; }

        /* ===== Players ===== */
        .player {
            --x: 50; --y: 50;
            position:absolute;
            left: calc(var(--x) * 1%); top: calc(var(--y) * 1%);
            transform: translate(-50%, -62%);
            text-align:center; cursor:pointer; user-select:none;
        }
        .avatar {
            width: clamp(42px, 5.2vw, 64px);
            height: clamp(42px, 5.2vw, 64px);
            border-radius: 50%;
            background: rgba(255,255,255,.14);
            border: 2px solid rgba(255,255,255,.7);
            display:grid; place-items:center; color:#fff; font-weight:800;
            backdrop-filter: blur(2px);
            transition: transform .15s ease, box-shadow .15s ease;
        }
        .player:hover .avatar { transform: translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.45); }
        .badge-pos { position:absolute; right:-6px; top:-6px; font: 700 11px/1 system-ui; color:#fff; background:#0d6efd; padding:2px 7px; border-radius:999px; border:1px solid #9ec0ff; }
        .name { display:none; margin-top:6px; padding:2px 8px; font-weight:700; font-size:13px; color:#fff; background: rgba(0,0,0,.45); border-radius:8px; white-space:nowrap; }
        .player.show .name { display:inline-block; }
        .player.selected .avatar { outline: 3px solid #ffc107; }
        .player.occupied .avatar { background: rgba(0,255,0,.2); border-color: #00ff00; }
        .player.occupied .badge-pos { background: #00ff00; color: #000; }

        /* === 라이트 테마에 맞춘 폼/정보 박스 톤 보정 === */
        .application-form {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #f9fafb;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #111; }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background: #ffffff;
            color: #111;
            font-size: 16px;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #0d6efd;
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
        }
        .btn-apply {
            width: 100%;
            padding: 15px;
            background: #0d6efd;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .btn-apply:hover { background: #0b5ed7; }

        .match-info {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #e5e7eb;
        }
        .match-info h3 { margin-top: 0; color: #0d6efd; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding: 8px 0; border-bottom: 1px solid #e5e7eb; }
        .info-label { font-weight: 600; color: #555; }
        .info-value { color: #111; }

        /* === ⬇ 포지션별 가격 정보: 파란색으로 변경 (나머지 동일) */
        .price-info {
            background: rgba(13,110,253,.08);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(13,110,253,.28);
        }
        .price-info h4 {
            margin-top: 0;
            color: #0d6efd;
            text-align: center;
        }
        .price-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; }
        .price-item {
            text-align: center;
            padding: 10px;
            background: rgba(13,110,253,.08);
            border-radius: 6px;
            border: 1px solid rgba(13,110,253,.28);
        }
        .price-item .position { font-weight: 600; color: #0d6efd; margin-bottom: 5px; }
        .price-item .price { font-size: 18px; font-weight: 700; color: #111; }
    </style>
</head>
<body>
<!-- 파란 헤더 + 우측 '목록으로' 버튼 -->
<div class="page-header">
    <h2>⚽ 축구 매치 신청 - 11v11 라인업</h2>
    <a class="list-btn" href="/match/list">목록으로</a>
</div>


<!-- 매치 정보 -->
<div class="match-info">
    <h3>매치 정보</h3>
    <div class="info-row">
        <span class="info-label">경기장:</span>
        <span class="info-value">{{match.venue.venueName}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">날짜:</span>
        <span class="info-value">{{match.matchDate}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">시간:</span>
        <span class="info-value">{{match.startTime}} - {{match.endTime}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">참가자:</span>
        <span class="info-value">{{match.currentPlayers}}/{{match.maxPlayers}}명</span>
    </div>
</div>

<!-- 포지션별 가격 정보 -->
<div class="price-info">
    <h4>⚽ 축구 포지션별 참가비</h4>
    <div class="price-grid">
        <div class="price-item">
            <div class="position">공격수</div>
            <div class="price">8,000원</div>
        </div>
        <div class="price-item">
            <div class="position">미드필더</div>
            <div class="price">6,000원</div>
        </div>
        <div class="price-item">
            <div class="position">수비수</div>
            <div class="price">4,000원</div>
        </div>
        <div class="price-item">
            <div class="position">골키퍼</div>
            <div class="price">무료</div>
        </div>
    </div>
</div>

<div class="pitch" id="pitch">
    <!-- Lines -->
    <div class="touchline"></div>
    <div class="halfline"></div>
    <div class="center-circle"></div>
    <div class="center-spot"></div>

    <div class="box left"></div>
    <div class="goal-area left"></div>
    <div class="pen-spot left"></div>
    <div class="arc left"></div>

    <div class="box right"></div>
    <div class="goal-area right"></div>
    <div class="pen-spot right"></div>
    <div class="arc right"></div>

    <div class="corner tl"></div><div class="corner tr"></div>
    <div class="corner bl"></div><div class="corner br"></div>

    <!-- ===== 홈팀 ===== -->
    <div class="player" style="--x:6.5; --y:50;" data-name="홈 GK" data-pos="GK" data-position="GK1">
        <div class="avatar">1</div>
        <div class="badge-pos">GK</div>
        <div class="name">{{#positionStatus.GK1}}{{positionStatus.GK1}}{{/positionStatus.GK1}}{{^positionStatus.GK1}}홈 GK{{/positionStatus.GK1}}</div>
    </div>
    <div class="player" style="--x:20; --y:20;" data-name="홈 DF1" data-pos="DF" data-position="DF1">
        <div class="avatar">2</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF1}}{{positionStatus.DF1}}{{/positionStatus.DF1}}{{^positionStatus.DF1}}홈 DF1{{/positionStatus.DF1}}</div>
    </div>
    <div class="player" style="--x:20; --y:40;" data-name="홈 DF2" data-pos="DF" data-position="DF2">
        <div class="avatar">3</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF2}}{{positionStatus.DF2}}{{/positionStatus.DF2}}{{^positionStatus.DF2}}홈 DF2{{/positionStatus.DF2}}</div>
    </div>
    <div class="player" style="--x:20; --y:60;" data-name="홈 DF3" data-pos="DF" data-position="DF3">
        <div class="avatar">4</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF3}}{{positionStatus.DF3}}{{/positionStatus.DF3}}{{^positionStatus.DF3}}홈 DF3{{/positionStatus.DF3}}</div>
    </div>
    <div class="player" style="--x:20; --y:80;" data-name="홈 DF4" data-pos="DF" data-position="DF4">
        <div class="avatar">5</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF4}}{{positionStatus.DF4}}{{/positionStatus.DF4}}{{^positionStatus.DF4}}홈 DF4{{/positionStatus.DF4}}</div>
    </div>
    <div class="player" style="--x:32; --y:30;" data-name="홈 MF1" data-pos="MF" data-position="MF1">
        <div class="avatar">6</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF1}}{{positionStatus.MF1}}{{/positionStatus.MF1}}{{^positionStatus.MF1}}홈 MF1{{/positionStatus.MF1}}</div>
    </div>
    <div class="player" style="--x:30.5; --y:50;" data-name="홈 MF2" data-pos="MF" data-position="MF2">
        <div class="avatar">7</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF2}}{{positionStatus.MF2}}{{/positionStatus.MF2}}{{^positionStatus.MF2}}홈 MF2{{/positionStatus.MF2}}</div>
    </div>
    <div class="player" style="--x:32; --y:70;" data-name="홈 MF3" data-pos="MF" data-position="MF3">
        <div class="avatar">8</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF3}}{{positionStatus.MF3}}{{/positionStatus.MF3}}{{^positionStatus.MF3}}홈 MF3{{/positionStatus.MF3}}</div>
    </div>
    <div class="player" style="--x:45; --y:20;" data-name="홈 FW1" data-pos="FW" data-position="FW1">
        <div class="avatar">9</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW1}}{{positionStatus.FW1}}{{/positionStatus.FW1}}{{^positionStatus.FW1}}홈 FW1{{/positionStatus.FW1}}</div>
    </div>
    <div class="player" style="--x:45; --y:50;" data-name="홈 FW2" data-pos="FW" data-position="FW2">
        <div class="avatar">10</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW2}}{{positionStatus.FW2}}{{/positionStatus.FW2}}{{^positionStatus.FW2}}홈 FW2{{/positionStatus.FW2}}</div>
    </div>
    <div class="player" style="--x:45; --y:80;" data-name="홈 FW3" data-pos="FW" data-position="FW3">
        <div class="avatar">11</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW3}}{{positionStatus.FW3}}{{/positionStatus.FW3}}{{^positionStatus.FW3}}홈 FW3{{/positionStatus.FW3}}</div>
    </div>

    <!-- ===== 원정팀 ===== -->
    <div class="player" style="--x:93.5; --y:50;" data-name="원정 GK" data-pos="GK" data-position="GK2">
        <div class="avatar">1</div>
        <div class="badge-pos">GK</div>
        <div class="name">{{#positionStatus.GK2}}{{positionStatus.GK2}}{{/positionStatus.GK2}}{{^positionStatus.GK2}}원정 GK{{/positionStatus.GK2}}</div>
    </div>
    <div class="player" style="--x:80; --y:20;" data-name="원정 DF1" data-pos="DF" data-position="DF5">
        <div class="avatar">2</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF5}}{{positionStatus.DF5}}{{/positionStatus.DF5}}{{^positionStatus.DF5}}원정 DF1{{/positionStatus.DF5}}</div>
    </div>
    <div class="player" style="--x:80; --y:40;" data-name="원정 DF2" data-pos="DF" data-position="DF6">
        <div class="avatar">3</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF6}}{{positionStatus.DF6}}{{/positionStatus.DF6}}{{^positionStatus.DF6}}원정 DF2{{/positionStatus.DF6}}</div>
    </div>
    <div class="player" style="--x:80; --y:60;" data-name="원정 DF3" data-pos="DF" data-position="DF7">
        <div class="avatar">4</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF7}}{{positionStatus.DF7}}{{/positionStatus.DF7}}{{^positionStatus.DF7}}원정 DF3{{/positionStatus.DF7}}</div>
    </div>
    <div class="player" style="--x:80; --y:80;" data-name="원정 DF4" data-pos="DF" data-position="DF8">
        <div class="avatar">5</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF8}}{{positionStatus.DF8}}{{/positionStatus.DF8}}{{^positionStatus.DF8}}원정 DF4{{/positionStatus.DF8}}</div>
    </div>
    <div class="player" style="--x:68; --y:30;" data-name="원정 MF1" data-pos="MF" data-position="MF4">
        <div class="avatar">6</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF4}}{{positionStatus.MF4}}{{/positionStatus.MF4}}{{^positionStatus.MF4}}원정 MF1{{/positionStatus.MF4}}</div>
    </div>
    <div class="player" style="--x:69.5; --y:50;" data-name="원정 MF2" data-pos="MF" data-position="MF5">
        <div class="avatar">7</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF5}}{{positionStatus.MF5}}{{/positionStatus.MF5}}{{^positionStatus.MF5}}원정 MF2{{/positionStatus.MF5}}</div>
    </div>
    <div class="player" style="--x:68; --y:70;" data-name="원정 MF3" data-pos="MF" data-position="MF6">
        <div class="avatar">8</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF6}}{{positionStatus.MF6}}{{/positionStatus.MF6}}{{^positionStatus.MF6}}원정 MF3{{/positionStatus.MF6}}</div>
    </div>
    <div class="player" style="--x:55; --y:20;" data-name="원정 FW1" data-pos="FW" data-position="FW4">
        <div class="avatar">9</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW4}}{{positionStatus.FW4}}{{/positionStatus.FW4}}{{^positionStatus.FW4}}원정 FW1{{/positionStatus.FW4}}</div>
    </div>
    <div class="player" style="--x:55; --y:50;" data-name="원정 FW2" data-pos="FW" data-position="FW5">
        <div class="avatar">10</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW5}}{{positionStatus.FW5}}{{/positionStatus.FW5}}{{^positionStatus.FW5}}원정 FW2{{/positionStatus.FW5}}</div>
    </div>
    <div class="player" style="--x:55; --y:80;" data-name="원정 FW3" data-pos="FW" data-position="FW6">
        <div class="avatar">11</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW6}}{{positionStatus.FW6}}{{/positionStatus.FW6}}{{^positionStatus.FW6}}원정 FW3{{/positionStatus.FW6}}</div>
    </div>
</div>

<!-- 신청 폼 -->
<div class="application-form">
    <h3>포지션 신청</h3>
    <form action="/match/{{match.matchId}}/apply" method="post">
        <div class="form-group">
            <label for="position">희망 포지션</label>
            <select id="position" name="position" required>
                <option value="">포지션을 선택하세요</option>
                <option value="공격수" data-price="8000">공격수 (FW) - 8,000원</option>
                <option value="미드필더" data-price="6000">미드필더 (MF) - 6,000원</option>
                <option value="수비수" data-price="4000">수비수 (DF) - 4,000원</option>
                <option value="골키퍼" data-price="0">골키퍼 (GK) - 무료</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">참가비 (원)</label>
            <input type="number" id="price" name="price" min="0" step="1000" readonly>
        </div>
        <button type="submit" class="btn-apply">매치 신청하기</button>
    </form>
</div>

<script>
    // 이름 라벨 토글 및 신청 현황 표시
    document.querySelectorAll('.player').forEach(p => {
        const nameEl = p.querySelector('.name');
        const positionKey = p.dataset.position;

        if (nameEl.textContent.trim() && nameEl.textContent.trim() !== p.dataset.name) {
            nameEl.style.display = 'inline-block';
            nameEl.style.color = '#00ff00';
            p.classList.add('occupied');
        } else {
            nameEl.textContent = p.dataset.name;
        }

        p.addEventListener('click', () => p.classList.toggle('show'));
    });

    // 포지션 선택 시 가격 자동 업데이트
    function updatePrice() {
        const positionSelect = document.getElementById('position');
        const priceInput = document.getElementById('price');
        const selectedOption = positionSelect.options[positionSelect.selectedIndex];

        if (selectedOption.value) {
            const price = selectedOption.getAttribute('data-price');
            priceInput.value = price;
        } else {
            priceInput.value = '';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        updatePrice();
        const positionSelect = document.getElementById('position');
        positionSelect.addEventListener('change', updatePrice);

        const occupiedPositions = [];
        document.querySelectorAll('.player.occupied').forEach(p => {
            const position = p.dataset.pos;
            if (position === 'GK') occupiedPositions.push('골키퍼');
            else if (position === 'DF') occupiedPositions.push('수비수');
            else if (position === 'MF') occupiedPositions.push('미드필더');
            else if (position === 'FW') occupiedPositions.push('공격수');
        });

        const uniqueOccupiedPositions = [...new Set(occupiedPositions)];
        Array.from(positionSelect.options).forEach(option => {
            if (uniqueOccupiedPositions.includes(option.value)) {
                option.disabled = true;
                option.textContent += ' (마감)';
            }
        });
    });
</script>
</body>
</html>

</script>
</body>
</html>
