<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>풋살 매치 신청 - 5v5 라인업</title>
    <style>
        :root {
            /* 필드 비율: 풋살 규격 (40m x 20m) */
            --pitch-max-w: 800px;
            --line: rgba(255,255,255,.85);
            --line-soft: rgba(255,255,255,.35);

            /* 하늘색 팔레트 */
            --sky-bg: #eaf6ff;      /* 배경용 연한 하늘색 */
            --sky-border: #4da3ff;  /* 글씨/테두리용 진한 하늘색 */

            /* info-subtle 팔레트 */
            --info-subtle: #cff4fc;
            --info-emphasis: #055160;
        }

        /* 라이트 테마 기본 */
        body { margin:0; background:#ffffff; color:#111; font-family:system-ui, sans-serif; }
        h2 { text-align:center; margin:18px 0; font-weight:800; }

        /* ===== 헤더: bg-info-subtle / text-info-emphasis + 우측 '목록으로' 버튼 ===== */
        .match-header{
  position:relative;
  background: var(--sky-bg); /* 여기만 변경 */
  color:#178717;             /* 그대로 */
  padding:12px 20px;
  border-radius:8px;
  margin-bottom:12px;
}
.match-header h2{
  margin:0;
  text-align:center;
  font-weight:800;
  color:#178717;
}
.match-header .list-btn{
  position:absolute;
  right:16px;
  top:50%;
  transform:translateY(-50%);
  padding:.5rem .9rem;
  border:1px solid #000000;
  border-radius:8px;
  color:#055160;
  background:#fff;
  text-decoration:none;
  font-weight:700;
  line-height:1;
}
.match-header .list-btn:hover{
  background:#055160;
  color:#fff;
}
        /* ===== Pitch ===== */
        .pitch {
            position: relative;
            width: min(95vw, var(--pitch-max-w));
            margin: 0 auto 24px;
            aspect-ratio: 2 / 1;
            border-radius: 18px;
            overflow: hidden;
            background:
                repeating-linear-gradient(
                    90deg,
                    #224d22 0%,
                    #224d22 8%,
                    #1d421d 8%,
                    #1d421d 16%
                );
            box-shadow: 0 20px 50px rgba(0,0,0,.15), inset 0 0 0 2px #0a1b0a;
        }
        .touchline { position:absolute; inset:2.5% 2.5%; border: 3px solid var(--line); border-radius: 8px; pointer-events:none; }
        .halfline { position:absolute; top:2.5%; bottom:2.5%; left:50%; width:3px; background:var(--line); transform:translateX(-50%); }
        .center-circle { position:absolute; left:50%; top:50%; width:18%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; transform:translate(-50%,-50%); }
        .center-spot { position:absolute; left:50%; top:50%; width:10px; height:10px; background:var(--line); border-radius:50%; transform:translate(-50%,-50%); }
        .box { position:absolute; width:18%; height:32%; top:50%; transform:translateY(-50%); border:3px solid var(--line); }
        .box.left { left:2.5%; }  .box.right { right:2.5%; }
        .goal-area { position:absolute; width:6.5%; height:15%; top:50%; transform:translateY(-50%); border:3px solid var(--line); }
        .goal-area.left { left:2.5%; } .goal-area.right { right:2.5%; }
        .pen-spot { position:absolute; width:10px; height:10px; background:var(--line); border-radius:50%; top:50%; transform:translateY(-50%); }
        .pen-spot.left { left: 2.5% + 12%; transform:translate(-50%,-50%); }
        .pen-spot.right { right: 2.5% + 12%; transform:translate(50%,-50%); }
        .arc { position:absolute; top:50%; width:10%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; border-left-color:transparent; border-right-color:transparent; }
        .arc.left { left: calc(2.5% + 18%); transform: translate(-50%,-50%) rotate(90deg); }
        .arc.right { right: calc(2.5% + 18%); transform: translate(50%,-50%) rotate(-90deg); }
        .corner { position:absolute; width:4%; aspect-ratio:1/1; border:3px solid var(--line); border-radius:50%; }
        .corner.tl { left:2.5%; top:2.5%; border-right-color:transparent; border-bottom-color:transparent; }
        .corner.tr { right:2.5%; top:2.5%; border-left-color:transparent; border-bottom-color:transparent; }
        .corner.bl { left:2.5%; bottom:2.5%; border-right-color:transparent; border-top-color:transparent; }
        .corner.br { right:2.5%; bottom:2.5%; border-left-color:transparent; border-top-color:transparent; }

        /* ===== Players ===== */
        .player { --x: 50; --y: 50; position:absolute; left: calc(var(--x) * 1%); top: calc(var(--y) * 1%); transform: translate(-50%, -62%); text-align:center; cursor:pointer; user-select:none; }
        .avatar {
            width: clamp(42px, 5.2vw, 64px); height: clamp(42px, 5.2vw, 64px); border-radius: 50%;
            background: rgba(0,0,0,.75); border: 2px solid rgba(255,255,255,.7);
            display:grid; place-items:center; color:#fff; font-weight:800; backdrop-filter: blur(2px);
            transition: transform .15s ease, box-shadow .15s ease;
        }
        .player:hover .avatar { transform: translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.45); }
        .badge-pos { position:absolute; right:-6px; top:-6px; font: 700 11px/1 system-ui; color:#fff; background:#0d6efd; padding:2px 7px; border-radius:999px; border:1px solid #9ec0ff; }
        .name { display:none; margin-top:6px; padding:2px 8px; font-weight:700; font-size:13px; color:#fff; background: rgba(0,0,0,.45); border-radius:8px; white-space:nowrap; }
        .player.show .name { display:inline-block; }
        .player.selected .avatar { outline: 3px solid #ffc107; }
        .player.occupied .avatar { background: rgba(0,255,0,.2); border-color: #00ff00; }
        .player.occupied .badge-pos { background: #00ff00; color: #000; }

        /* ===== 매치 정보 카드 ===== */
        .match-info { background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #e5e7eb; }
        .match-info h3 { margin-top: 0; color: #0d6efd; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding: 8px 0; border-bottom: 1px solid #e5e7eb; }
        .info-label { font-weight: 600; color: #555; }
        .info-value { color: #111; }

        /* ===== 포지션별 참가비: 하늘색 카드 ===== */
        .price-info{
            background: var(--sky-bg);
            border: 1px solid var(--sky-border);
            border-radius: 12px;
            padding: 18px 20px;
            margin-bottom: 20px;
        }
        .price-info h4{
            margin: 0 0 14px; text-align: center; color: #178717; font-weight: 800;
        }
        .price-grid{ display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
        .price-item{
            background: var(--sky-bg);
            border: 1px solid var(--sky-border);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .price-item .position{ color: #178717; font-weight: 700; margin-bottom: 6px; }
        .price-item .price{ font-size: 22px; font-weight: 800; color: #111; }
        @media (max-width: 640px){ .price-grid{ grid-template-columns: repeat(2, 1fr); } }

        /* ===== 신청 폼 ===== */
        .application-form { max-width: 600px; margin: 0 auto; padding: 20px; background: #f9fafb; border-radius: 12px; border: 1px solid #e5e7eb; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #111; }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; background: #ffffff; color: #111; font-size: 16px;
        }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #0d6efd; box-shadow: 0 0 0 3px rgba(13,110,253,.25); }

        /* 신청 버튼을 info-subtle 팔레트로 통일 */
        .btn-apply{
            width:100%; padding:15px;
            background: var(--info-subtle);
            color: var(--info-emphasis);
            border:1px solid var(--info-emphasis);
            border-radius:8px;
            font-size:18px; font-weight:600; cursor:pointer;
            transition: background-color .2s, color .2s;
        }
        .btn-apply:hover{ background: var(--info-emphasis); color:#fff; }

/* === 텍스트 컬러를 모두 진한 하늘색으로 통일 === */
.match-header,
.match-header h2,
.price-info h4,
.price-item .position,
.match-info h3,
.info-label,
.info-value {
  color: var(--sky-border) !important;
}

.match-header .list-btn {
  color: var(--sky-border) !important;
  border-color: var(--sky-border) !important;
}

.btn-apply {
  color: var(--sky-border) !important;
  border-color: var(--sky-border);
}

    </style>
</head>
<body>

<!-- 헤더 -->
<div class="match-header">
    <h2>⚽ 풋살 매치 신청 - 5v5 라인업</h2>
    <a href="/match/list" class="list-btn">목록으로</a>
</div>

<!-- 매치 정보 -->
<div class="match-info">
    <h3>매치 정보</h3>
    <div class="info-row">
        <span class="info-label">경기장:</span>
        <span class="info-value">{{match.venue.venueName}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">날짜:</span>
        <span class="info-value">{{match.matchDate}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">시간:</span>
        <span class="info-value">{{match.startTime}} - {{match.endTime}}</span>
    </div>
    <div class="info-row">
        <span class="info-label">참가자:</span>
        <span class="info-value">{{match.currentPlayers}}/{{match.maxPlayers}}명</span>
    </div>
</div>

<!-- 포지션별 가격 정보 (이모지/‘풋살’ 제거, 중앙 정렬) -->
<div class="price-info">
    <h4>포지션별 참가비</h4>
    <div class="price-grid">
        <div class="price-item">
            <div class="position">공격수</div>
            <div class="price">6,000원</div>
        </div>
        <div class="price-item">
            <div class="position">미드필더</div>
            <div class="price">5,000원</div>
        </div>
        <div class="price-item">
            <div class="position">수비수</div>
            <div class="price">5,000원</div>
        </div>
        <div class="price-item">
            <div class="position">골키퍼</div>
            <div class="price">무료</div>
        </div>
    </div>
</div>

<div class="pitch" id="pitch">
    <!-- Lines -->
    <div class="touchline"></div>
    <div class="halfline"></div>
    <div class="center-circle"></div>
    <div class="center-spot"></div>

    <div class="box left"></div>
    <div class="goal-area left"></div>
    <div class="pen-spot left"></div>
    <div class="arc left"></div>

    <div class="box right"></div>
    <div class="goal-area right"></div>
    <div class="pen-spot right"></div>
    <div class="arc right"></div>

    <div class="corner tl"></div><div class="corner tr"></div>
    <div class="corner bl"></div><div class="corner br"></div>

    <!-- 홈팀 -->
    <div class="player" style="--x:6.5; --y:50;" data-name="홈 GK" data-pos="GK" data-position="GK1">
        <div class="avatar">1</div>
        <div class="badge-pos">GK</div>
        <div class="name">{{#positionStatus.GK1}}{{positionStatus.GK1}}{{/positionStatus.GK1}}{{^positionStatus.GK1}}홈 GK{{/positionStatus.GK1}}</div>
    </div>
    <div class="player" style="--x:20; --y:30;" data-name="홈 DF1" data-pos="DF" data-position="DF1">
        <div class="avatar">2</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF1}}{{positionStatus.DF1}}{{/positionStatus.DF1}}{{^positionStatus.DF1}}홈 DF1{{/positionStatus.DF1}}</div>
    </div>
    <div class="player" style="--x:20; --y:70;" data-name="홈 DF2" data-pos="DF" data-position="DF2">
        <div class="avatar">3</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF2}}{{positionStatus.DF2}}{{/positionStatus.DF2}}{{^positionStatus.DF2}}홈 DF2{{/positionStatus.DF2}}</div>
    </div>
    <div class="player" style="--x:32; --y:50;" data-name="홈 MF1" data-pos="MF" data-position="MF1">
        <div class="avatar">4</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF1}}{{positionStatus.MF1}}{{/positionStatus.MF1}}{{^positionStatus.MF1}}홈 MF1{{/positionStatus.MF1}}</div>
    </div>
    <div class="player" style="--x:45; --y:50;" data-name="홈 FW1" data-pos="FW" data-position="FW1">
        <div class="avatar">5</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW1}}{{positionStatus.FW1}}{{/positionStatus.FW1}}{{^positionStatus.FW1}}홈 FW1{{/positionStatus.FW1}}</div>
    </div>

    <!-- 원정팀 -->
    <div class="player" style="--x:93.5; --y:50;" data-name="원정 GK" data-pos="GK" data-position="GK2">
        <div class="avatar">1</div>
        <div class="badge-pos">GK</div>
        <div class="name">{{#positionStatus.GK2}}{{positionStatus.GK2}}{{/positionStatus.GK2}}{{^positionStatus.GK2}}원정 GK{{/positionStatus.GK2}}</div>
    </div>
    <div class="player" style="--x:80; --y:30;" data-name="원정 DF1" data-pos="DF" data-position="DF3">
        <div class="avatar">2</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF3}}{{positionStatus.DF3}}{{/positionStatus.DF3}}{{^positionStatus.DF3}}원정 DF1{{/positionStatus.DF3}}</div>
    </div>
    <div class="player" style="--x:80; --y:70;" data-name="원정 DF2" data-pos="DF" data-position="DF4">
        <div class="avatar">3</div>
        <div class="badge-pos">DF</div>
        <div class="name">{{#positionStatus.DF4}}{{positionStatus.DF4}}{{/positionStatus.DF4}}{{^positionStatus.DF4}}원정 DF2{{/positionStatus.DF4}}</div>
    </div>
    <div class="player" style="--x:68; --y:50;" data-name="원정 MF1" data-pos="MF" data-position="MF2">
        <div class="avatar">4</div>
        <div class="badge-pos">MF</div>
        <div class="name">{{#positionStatus.MF2}}{{positionStatus.MF2}}{{/positionStatus.MF2}}{{^positionStatus.MF2}}원정 MF1{{/positionStatus.MF2}}</div>
    </div>
    <div class="player" style="--x:55; --y:50;" data-name="원정 FW1" data-pos="FW" data-position="FW2">
        <div class="avatar">5</div>
        <div class="badge-pos">FW</div>
        <div class="name">{{#positionStatus.FW2}}{{positionStatus.FW2}}{{/positionStatus.FW2}}{{^positionStatus.FW2}}원정 FW2{{/positionStatus.FW2}}</div>
    </div>
</div>

<!-- 신청 폼 -->
<div class="application-form">
    <h3>포지션 신청</h3>
    <form action="/match/{{match.matchId}}/apply" method="post">
        <div class="form-group">
            <label for="position">희망 포지션</label>
            <select id="position" name="position" required>
                <option value="">포지션을 선택하세요</option>
                <option value="공격수" data-price="6000">공격수 (FW) - 6,000원</option>
                <option value="미드필더" data-price="5000">미드필더 (MF) - 5,000원</option>
                <option value="수비수" data-price="5000">수비수 (DF) - 5,000원</option>
                <option value="골키퍼" data-price="0">골키퍼 (GK) - 무료</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">참가비 (원)</label>
            <input type="number" id="price" name="price" min="0" step="1000" readonly>
        </div>
        <button type="submit" class="btn-apply">매치 신청하기</button>
    </form>
</div>

<script>
    // 이름 라벨 토글 및 신청 현황 표시
    document.querySelectorAll('.player').forEach(p => {
        const nameEl = p.querySelector('.name');
        if (nameEl.textContent.trim() && nameEl.textContent.trim() !== p.dataset.name) {
            nameEl.style.display = 'inline-block';
            nameEl.style.color = '#00b341';
            p.classList.add('occupied');
        } else {
            nameEl.textContent = p.dataset.name;
        }
        p.addEventListener('click', () => p.classList.toggle('show'));
    });

    // 포지션 선택 시 가격 자동 업데이트
    function updatePrice() {
        const positionSelect = document.getElementById('position');
        const priceInput = document.getElementById('price');
        const selectedOption = positionSelect.options[positionSelect.selectedIndex];
        priceInput.value = selectedOption.value ? selectedOption.getAttribute('data-price') : '';
    }

    document.addEventListener('DOMContentLoaded', function() {
        updatePrice();
        const positionSelect = document.getElementById('position');
        positionSelect.addEventListener('change', updatePrice);

        // 신청된 포지션은 선택 불가
        const occupiedPositions = [];
        document.querySelectorAll('.player.occupied').forEach(p => {
            const pos = p.dataset.pos;
            if (pos === 'GK') occupiedPositions.push('골키퍼');
            else if (pos === 'DF') occupiedPositions.push('수비수');
            else if (pos === 'MF') occupiedPositions.push('미드필더');
            else if (pos === 'FW') occupiedPositions.push('공격수');
        });
        const unique = [...new Set(occupiedPositions)];
        Array.from(positionSelect.options).forEach(opt => {
            if (unique.includes(opt.value)) {
                opt.disabled = true;
                opt.textContent += ' (마감)';
            }
        });
    });
</script>
</body>
</html>
